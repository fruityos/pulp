sub kmain(initJarPtr)
	local rdAddr, rdSize, blockSize

	_keys = 0
	_kbhead = 0
	_kbtail = 0

	heap_init()
	global_init()

	scr_cls(global_getScr())

	kputs("Welcome to FruityOS!")
	sys_putch(10)

	kputs("Unpacking initial jar...")
	sys_putch(10)
	kunpack(initJarPtr)

	kputs("Ready!")
	sys_putch(10)

	return 0
end
