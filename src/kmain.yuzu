sub kmain(initJarPtr)
	local rdAddr, rdSize, blockSize, root, bin, yc

	heap_init()
	global_init()

	kcls()
	kprintln("Welcome to FruityOS!")
	heap_printStats()

	kunpack(initJarPtr)

	ramfs_createFile(global_getRamfs(), "/", "bin", INODE_TYPE_DIR())
	ramfs_createFile(global_getRamfs(), "/bin", "yc.fap", INODE_TYPE_FILE())

	ramfs_printTree(global_getRamfs())

	ramfs_deleteFile(global_getRamfs(), "/", "bin")
	heap_printStats()

	kprintln("Ready!")

	return 0
end
