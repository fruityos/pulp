sub kmain(initJarPtr)
	local rdAddr, rdSize, blockSize

	heap_init()
	global_init()

	kcls()

	kputs("Welcome to FruityOS!")
	kputch(10)

	kputs("Unpacking initial jar...")
	kputch(10)
	kunpack(initJarPtr)

	heap_printStats()

	kputs("Press any key to continue...")
	while sys_getch() == -1 do end

	kcls()

	kputs("Ready!")
	kputch(10)

	return 0
end
